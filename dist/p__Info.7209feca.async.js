"use strict";(self.webpackChunkcubyfun_template_web=self.webpackChunkcubyfun_template_web||[]).push([[563],{49464:function(Oe,x,r){r.r(x),r.d(x,{default:function(){return re}});var Y=r(90967),p=r.n(Y),H=r(30577),u=r.n(H),$=r(47368),l=r(87074),h=r(76380),Z=r(94165),S=r(53957),o=r(50959),C={remainMoney:"remainMoney___ZPhun",taskList:"taskList___nLtgG",finishTaskList:"finishTaskList___oKmJR"},q=r(73537),_=r.n(q);function b(){return"5"}function ee(){return"2"}function ne(){return atob("ekZ5dA==")+b()+atob("b1FqTnRCVw==")}var te=new(_())({accessKeyId:atob("TFRBSTV0NlNz")+"LPS"+ne(),accessKeySecret:atob("UlZoR0Zn")+b()+"sQ"+b()+atob("cmhi")+ee()+atob("Q1BzWU92YXFCZUtDSVFJTw=="),endpoint:"https://oss-cn-shenzhen.aliyuncs.com",bucket:"kimmy-info"}),k=te,ae=r(9669),se=r.n(ae),a=r(11527),oe=function(){var ie=(0,o.useState)(0),w=u()(ie,2),d=w[0],g=w[1],ce=(0,o.useState)(!1),P=u()(ce,2),A=P[0],le=P[1],ue=(0,o.useState)([]),B=u()(ue,2),i=B[0],y=B[1],de=(0,o.useState)([]),F=u()(de,2),m=F[0],L=F[1],fe=(0,o.useState)([]),N=u()(fe,2),v=N[0],D=N[1],he=(0,o.useState)(""),I=u()(he,2),J=I[0],ve=I[1],me=(0,o.useState)(0),O=u()(me,2),E=O[0],pe=O[1],Te=(0,o.useState)(""),z=u()(Te,2),M=z[0],ke=z[1],Ce=(0,o.useState)(0),G=u()(Ce,2),j=G[0],ge=G[1],ye=(0,o.useCallback)(function(){console.log("handleGetTaskList");var t="https://kimmy-info.oss-cn-shenzhen.aliyuncs.com/info.json";return se().get(t+"?t="+Date.now()).then(function(n){console.log(n,"response");var e=n.data;return Array.isArray(e.finishTaskList)&&L(e.finishTaskList),Array.isArray(e.taskList)&&(y(e.taskList),console.log(i)),e.money&&g(e.money-0),n}).catch(function(n){l.ZP.error("\u83B7\u53D6"),console.log(n)})},[]);(0,o.useEffect)(function(){ye()},[]);var Se=function(){if(!(!E||!J)){console.log("handleAddTask");var n={title:J,reward:E,createTime:Date.now()},e=p()(i);e.push(n),y(e);var s=JSON.stringify({recordList:v,taskList:e,finishTaskList:m,money:d}),c=new Blob([s]);k.put("info.json",c,{"Content-Type":"application/x-www-form-urlencoded"}).then(function(f){console.log(f),l.ZP.success("\u53D1\u5E03\u6210\u529F")}).catch(function(){l.ZP.error("\u53D1\u5E03\u5931\u8D25")})}},je=function(n){if(console.log("handleRemoveTask"),window.confirm("\u786E\u8BA4\u5220\u9664?")){for(var e=0;e<i.length;e++)if(n===i[e].createTime){var s=p()(i);s.splice(e,1),y(s);break}var c=JSON.stringify({recordList:v,taskList:i,finishTaskList:m,money:d}),f=new Blob([c]);k.put("info.json",f,{"Content-Type":"application/x-www-form-urlencoded"}).then(function(T){console.log(T),l.ZP.success("\u5220\u9664\u6210\u529F")}).catch(function(){l.ZP.error("\u53D1\u5E03\u5931\u8D25")})}},K=function(n){for(var e=p()(i),s=0;s<m.length;s++)if(n.createTime===m[s].createTime&&n.title===m[s].title){e.splice(s,1),L(e);break}var c=p()(i);c.push(n),y(c);var f=JSON.stringify({recordList:v,taskList:c,finishTaskList:e,money:d-n.reward}),T=new Blob([f]);k.put("info.json",T,{"Content-Type":"application/x-www-form-urlencoded"}).then(function(R){console.log(R),l.ZP.success("\u64A4\u9500\u6210\u529F\uFF01"),g(d-n.reward)}).catch(function(){l.ZP.error("\u53D1\u5E03\u5931\u8D25")})},be=function(n){for(var e=p()(i),s=0;s<i.length;s++)if(n.createTime===i[s].createTime&&n.title===i[s].title){e.splice(s,1);break}y(e),console.log(m,"finishTaskList");var c=p()(m);c.push(n),L(c);var f=JSON.stringify({recordList:v,taskList:e,finishTaskList:c,money:d-0+(n.reward-0)}),T=new Blob([f]);k.put("info.json",T,{"Content-Type":"application/x-www-form-urlencoded"}).then(function(R){console.log(R),g(d-0+(n.reward-0)),l.ZP.success("\u5B8C\u6210\u4EFB\u52A1\uFF01")}).catch(function(){l.ZP.error("\u4FEE\u6539\u5931\u8D25")})},ze=function(n){for(var e=p()(v),s=0;s<v.length;s++)if(n.createTime===v[s].createTime&&n.title===v[s].title){e.splice(s,1),D(e);break}var c=JSON.stringify({recordList:e,taskList:i,finishTaskList:e,money:d-0+(n.cost-0)}),f=new Blob([c]);k.put("info.json",f,{"Content-Type":"application/x-www-form-urlencoded"}).then(function(T){console.log(T),l.ZP.success("\u64A4\u9500\u6210\u529F\uFF01"),g(d-0+(n.cost-0))}).catch(function(){l.ZP.error("\u64A4\u9500\u5931\u8D25")})},Le=function(){if(!(!M||!j)){console.log("handleAddRecord");var n={title:M,cost:j,createTime:Date.now()},e=p()(v);e.push(n),D(e);var s=JSON.stringify({recordList:e,taskList:i,finishTaskList:m,money:d-j}),c=new Blob([s]);k.put("info.json",c,{"Content-Type":"application/x-www-form-urlencoded"}).then(function(f){console.log(f),l.ZP.success("\u8BB0\u5F55\u6210\u529F"),g(d-j)}).catch(function(){l.ZP.error("\u8BB0\u5F55\u6210\u529F")})}},U=function(){le(!A)},Re=(0,o.useState)(!1),V=u()(Re,2),xe=V[0],W=V[1],Ze=(0,o.useState)(!1),Q=u()(Ze,2),we=Q[0],X=Q[1],Pe=(0,o.useCallback)(function(){W(!0)},[]),Ae=(0,o.useCallback)(function(){X(!0)},[]),Be=(0,o.useCallback)(function(){W(!1)},[]),Fe=(0,o.useCallback)(function(t){pe(t.target.value)},[]),Ne=(0,o.useCallback)(function(t){ve(t.target.value)},[]),De=(0,o.useCallback)(function(t){ke(t.target.value)},[]),Ie=(0,o.useCallback)(function(t){ge(t.target.value)},[]),Je=(0,o.useCallback)(function(){X(!1)},[]);return(0,a.jsxs)($._z,{className:C.taskPage,children:[(0,a.jsx)("div",{className:C.remainMoney,children:d}),A?(0,a.jsxs)("div",{children:[(0,a.jsx)(h.ZP,{onClick:U,children:"\u8BB0\u5F55"}),(0,a.jsx)("div",{className:C.taskList,children:v.map(function(t,n){return(0,a.jsxs)("li",{children:[t.title,"-",t.cost,(0,a.jsx)(h.ZP,{onClick:function(){return K(t)},children:"\u6DFB\u52A0"})]},n)})}),(0,a.jsx)(h.ZP,{onClick:Ae,children:"\u6DFB\u52A0"}),(0,a.jsxs)(Z.Z,{title:"AddRecord",placement:"bottom",closable:!1,onClose:Je,open:we,children:[(0,a.jsx)(S.Z,{placeholder:"\u8BB0\u5F55",onChange:De}),(0,a.jsx)(S.Z,{placeholder:"Cost",onChange:Ie}),(0,a.jsx)(h.ZP,{onClick:Le,children:"\u786E\u8BA4\u8BB0\u5F55"})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)(h.ZP,{onClick:U,children:"\u4EFB\u52A1"}),(0,a.jsx)("div",{className:C.taskList,children:i.map(function(t,n){return(0,a.jsxs)("li",{children:[t.title,"-\u5956\u52B1",t.reward,(0,a.jsx)(h.ZP,{type:"primary",shape:"circle",onClick:function(){return je(t.createTime)},children:"Del"}),(0,a.jsx)(h.ZP,{type:"primary",shape:"circle",onClick:function(){return be(t)},children:"Do"})]},n)})}),(0,a.jsx)("div",{className:C.finishTaskList,children:m.map(function(t,n){return(0,a.jsxs)("li",{children:[t.title,"-\u5956\u52B1",t.reward,(0,a.jsx)(h.ZP,{type:"primary",shape:"circle",onClick:function(){return K(t)},children:"Re"})]},n)})}),(0,a.jsx)(h.ZP,{onClick:Pe,children:"\u6DFB\u52A0"}),(0,a.jsxs)(Z.Z,{title:"AddTask",placement:"bottom",closable:!1,onClose:Be,open:xe,children:[(0,a.jsx)(S.Z,{placeholder:"\u4EFB\u52A1",onChange:Ne}),(0,a.jsx)(S.Z,{placeholder:"Reward",onChange:Fe}),(0,a.jsx)(h.ZP,{onClick:Se,children:"\u786E\u8BA4\u53D1\u5E03"})]})]})]})},re=oe}}]);
